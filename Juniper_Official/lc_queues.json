{
    "configuration" : {
        "@" : {
            "junos:changed-seconds" : "1517802773",
            "junos:changed-localtime" : "2018-02-05 03:52:53 UTC"
        },
        "version" : "18.1I20171121_0736_rsankar [rsankar]"
    },
    "iceberg:iceberg" : {
        "topics" : {
            "topic" : [
            {
                "topic-name" : "line-cards",
                "rules" : {
                    "rule" : [
                    {
                        "rule-name" : "line-cards",
                        "keys" : ["name"],
                        "sensors" : {
                            "sensor" : [
                            {
                                "sensor-name" : "components",
                                "open-config" : {
                                    "sensor-name" : "/components/",
                                    "frequency" : "20000"
                                }
                            }
                            ]
                        },
                        "fields" : {
                            "field" : [
                            {
                                "field-name" : "memory",
                                "sensors" : {
                                    "sensor" : [
                                    {
                                        "sensor-name" : "components",
                                        "where" : "/components/component/properties/property/@name == 'memory-dram-used'",
                                        "path" : "/components/component/properties/property/state/value"
                                    }
                                    ]
                                },
                                "type" : "integer"
                            },
                            {
                                "field-name" : "memory-state",
                                "formula" : {
                                    "dynamic-threshold" : {
                                        "algorithm" : "3sigma",
                                        "learning-period" : "10d",
                                        "pattern-periodicity" : "1d"
                                    }
                                }
                            },
                            {
                                "field-name" : "name",
                                "sensors" : {
                                    "sensor" : [
                                    {
                                        "sensor-name" : "components",
                                        "where" : "/components/component/@name =~ /^FPC[0-9]*$/",
                                        "path" : "/components/component/@name"
                                    }
                                    ]
                                },
                                "type" : "string"
                            },
                            {
                                "field-name" : "temperature",
                                "sensors" : {
                                    "sensor" : [
                                    {
                                        "sensor-name" : "components",
                                        "where" : "/components/component/properties/property/@name =='temperature-intake'",
                                        "path" : "/components/component/properties/property/state/value"
                                    }
                                    ]
                                },
                                "type" : "integer"
                            }
                            ]
                        },
                        "triggers" : {
                            "trigger" : [
                            {
                                "trigger-name" : "temperature",
                                "term" : [
                                {
                                    "term-name" : "green",
                                    "when" : [
                                    {
                                        "left-operand" : "$temperature",
                                        "operator" : "less-than-equal-to",
                                        "right-operand" : "20"
                                    }
                                    ],
                                    "then" : {
                                        "status" : {
                                            "color" : "green",
                                            "message" : "This is evaluated using static thresholds. Temperature: $temperature"
                                        }
                                    }
                                },
                                {
                                    "term-name" : "red",
                                    "when" : [
                                    {
                                        "left-operand" : "$temperature",
                                        "operator" : "greater-than",
                                        "right-operand" : "20"
                                    }
                                    ],
                                    "then" : {
                                        "status" : {
                                            "color" : "red",
                                            "message" : "This is evaluated using static thresholds. Temperature: $temperature"
                                        }
                                    }
                                }
                                ]
                            }
                            ]
                        }
                    }
                    ]
                }
            },
            {
                "topic-name" : "queues",
                "rules" : {
                    "rule" : [
                    {
                       "rule-name" : "queue",
                        "keys" : ["if-name", "queue-no"],
                        "sensors" : {
                            "sensor" : [
                            {
                                "sensor-name" : "jnpr_qmon_ext",
                                "native-gpb" : {
                                    "sensor-name" : "jnpr_qmon_ext",
                                    "port" : 25000
                                }
                            }
                            ]
                        },
                        "fields" : {
                            "field" : [
                            {
                                "field-name" : "if-name",
                                "sensors" : {
                                    "sensor" : [
                                    {
                                        "sensor-name" : "jnpr_qmon_ext",
                                        "where" : "/interfaces/interface/@name =~ /^xe-2\/0\/[12]$/",
                                        "path" : "queue_monitor_element_info.if_name"
                                    }
                                    ]
                                }
                            },
                           {
                                "field-name" : "queue-no",
                                "sensors" : {
                                    "sensor" : [
                                    {
                                        "sensor-name" : "jnpr_qmon_ext",
                                        "path" : "queue_monitor_element_info.queue_monitor_stats_egress.queue_monitor_stats_info.queue_number"
                                    }
                                    ]
                                }
                            }
                            ]
                        }
                    }
                    ]
                }
            }
            ]
        },
        "profiles" : {
            "profile" : [
            {
                "profile-name" : "demo-profile-1",
                "topics" : ["line-cards", "queues", "routing-engines"]
            }
            ]
        },
        "devices" : {
            "device" : [
            {
                "device-id" : "R1",
                "host" : "teakwood",
                "open-config" : {
                    "port" : 32767
                },
                "authentication" : {
                    "password" : {
                        "username" : "username123",
                        "password" : "username123"
                    }
                }
            },
            {
                "device-id" : "R2",
                "host" : "cassia",
                "authentication" : {
                    "password" : {
                        "username" : "username123",
                        "password" : "username123"
                    }
                }
            }
            ]
        },
        "device-groups" : {
            "device-group" : [
            {
                "device-group-name" : "Core",
                "authentication" : {
                    "passowrd" : {
                        "username" : "username123",
                        "password" : "username123"
                    }
                },
                "devices" : ["R1", "R2"],
                "profiles" : ["demo-profile-1"]
            }
            ]
        }
    }
}